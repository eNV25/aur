# Maintainer: eNV25 <env252525@gmail.com>
# Contributor: Dave Reisner <d@falconindy.com>

pkgname=libnghttp3
pkgver=0.1.1
pkgrel=1
pkgdesc="HTTP/3 library written in C"
arch=('x86_64')
url="https://github.com/ngtcp2/nghttp3"
license=('MIT')
makedepends=('git')
checkdepends=('cunit')
source=("https://github.com/ngtcp2/nghttp3/releases/download/v$pkgver/nghttp3-$pkgver.tar.xz")

build() {
	cd "$srcdir/nghttp3-$pkgver"

	./configure \
		--enable-lib-only \
		--prefix=/usr

	make
}

check() {
	cd "$srcdir/nghttp3-$pkgver"

	make -k check
}

package() {
	provides+=('libnghttp3.so')

	cd "$srcdir/nghttp3-$pkgver"

	make DESTDIR="$pkgdir" install
}

sha256sums=('afe64349ee55e0ab9a3c2468caf2c9910036e7a15e58000ff2ad19cc65efa0f6')
